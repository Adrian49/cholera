---
title: "Time Series"
author: "lindbrook"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Time Series}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, echo = FALSE, message = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
library(cholera)
```

## Overview

The standard "textbook" story is that John Snow helped stem the tide of the outbreak by getting the local government to remove the handle of the Broad Street pump.^[https://www.cdc.gov/mmwr/preview/mmwrhtml/mm5334a1.htm; https://www.nytimes.com/2017/02/06/health/cholera-vaccine-bangladesh.html]

While Snow likely believed that this action could have mitigated the outbreak, he was skeptical of its actual effect. He writes that by the time the pump was removed on Friday, 08 September 1854, "the epidemic had evidently subsided" (Snow 1855b, 153).

As part of the Vestry Report, both he and the committee included separate tables that appear to reflect separate data on the number of fatalities. I have included both as separate data sets, "time.series.snow" and "time.series.vestry", in this package.

The data are plotted below. Regardless of the source, we can see that the removal of the pump handle comes after a significant decline in the number of fatalities.

## Vestry Report: Official Data

```{r, fig.width = 5.25, fig.height = 5.25, fig.align = "center", echo = FALSE}
plot(time.series.vestry$date, time.series.vestry$fatalities, type = "o",
  xlab = "Date", ylab = "fatalities")
abline(v = as.Date("1854-09-08"), col = "red", lty = "dotted")
axis(3, at = as.Date("1854-09-08"), label = "Sep 08", cex.axis = 0.8,
  line = -0.5, col.axis = "red", col.tick = "red")
title(main = "Removing the Broad Street Pump Handle")

```

## Vestry Report: Snow Data

```{r, fig.width = 5.25, fig.height = 5.25, fig.align = "center", echo = FALSE}
plot(time.series.snow$date, time.series.snow$deaths, type = "o", xlab = "Date",
  ylab = "fatalities", xlim = range(time.series.vestry$date),
  ylim = range(time.series.vestry$fatalities))
abline(v = as.Date("1854-09-08"), col = "red", lty = "dotted")
axis(3, at = as.Date("1854-09-08"), label = "Sep 08", cex.axis = 0.8,
  line = -0.5, col.axis = "red", col.tick = "red")
title(main = "Removing the Broad Street Pump Handle")
```
